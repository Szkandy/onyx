<!-- BEGIN: title -->Print Article List<!-- END: title -->
<!-- BEGIN: content -->
<div class="page-header">
	<div class="page-header-wrapper">
		<h1 class="page-title popup"><span>Print Article List</span> <span class="info">ID {NODE.id}</span></h1>
	</div>
</div>

{FILE "bo/node/default_top.html"}

<style type="text/css">
div.item-detail {
/*
	float: left;
	background: white;
	padding: 10px;
	border: solid 1px black;
	margin: 5px;
	*/
}
#pa-list {
	width: 100%;
	height: 200px;
	overflow: auto;
	background: white;
	padding: 10px;
	
}

#item-edit {
	width: 100%;
	height: 230px;
	overflow: auto;
	background: white;
	padding: 10px;
	margin-top: 20px;
	
}

</style>

<script type="text/javascript">
function AddToNode(src, title) {
	$('#file-src').attr('value', src);
	$('#file-title').attr('value', title);
	$('#add-to-node').css('display', 'block');
	
}
</script>

<fieldset>
<legend>Current Files</legend>
<h5>Root/{GET.role}/{GET.node_id}</h5>
<div id="pa-list">
	<!-- BEGIN: item -->
	<div class="item-detail">
	<a title="Click on this file to edit it's properties" href="#{FILE.id}" onclick="$('#edit-file').attr('value', '{FILE.id}'); document.forms[0].submit();" onmouseover="nOHint.show('FILE.extra-detail', this)">{FILE.title}</a> ({FILE.size})<br />
	<!--{FILE.mime-type}<br />{FILE.type-detail}<br />
	{FILE.modified}<br />
	Priority: {FILE.priority} -->
	<!-- BEGIN: RTE_select -->
	<br /><a href="#{FILE.id}" onclick="chooseImage('/image/{FILE.src}', '{FILE.title}')"><img src="/image/{FILE.src}" /> use this image</a>
	<!-- END: RTE_select -->
	</div>
	<!-- END: item -->
</div>
<a class="button" href="#" onclick="openEdit('/request/sys/xhtml.bo/backoffice.bo/component/form_file~relation=print_article:node_id={GET.id}~'); return false;"><span>Manage Files</span></a><br /><br /><br />

</fieldset>

<!-- BEGIN: file_upload -->
<fieldset id="add-to-node" style="display: none;">
<label>Priority:</label>
<input class="text" style="width: 50px;" type="text" name="file[priority]" value="{FILE.priority}" /><br />
<label>Short description*:</label>
<input type="text" id="file-title" name="file[title]" value="{FILE.title}"/><br />
<label>Type:</label>
<select name="file[type]" id="file-type" onchange="manage('jtcm-detail')">
	<option value="article" {SELECTED_article}>Article</option>
	<option value="abstract" {SELECTED_abstract}>Abstract</option>
	<option value="review" {SELECTED_review}>Review</option>
</select>
<label>Authors:</label>
<input type="text" name="file[authors]" value="{FILE.authors}"/><br />
<label>Issue Number:</label>
<input type="text" name="file[issue_number]" value="{FILE.issue_number}"/><br />
<label>Page Where The Editorial Start:</label>
<input type="text" name="file[page_from]" value="{FILE.page_from}"/><br />
<label>Date Of Issue:</label>
<input type="text" id="file-date" name="file[date]" value="{FILE.date}"/><br />
<label>Publisher:</label>
<input type="text" name="file[other][publisher]" value="{FILE.other.publisher}"/><br />
<div id="jtcm-detail" style="display: none">
	<label>JTCM issue:</label>
	<input type="text" name="file[other][jtcm_issue]" value="{FILE.other.jtcm_issue}"/><br />
	<label>JTCM Page From:</label>
	<input type="text" name="file[other][jtcm_page_from]" value="{FILE.other.jtcm_page_from}"/><br />
	<label>JTCM date:</label>
	<input type="text" id="file-jtcm-date" name="file[other][jtcm_date]" value="{FILE.other.jtcm_date}"/><br />
</div>
<input type="hidden" id="file-src" name="file[src]" value="{FILE.src}"/>
<button type="submit" name="add" id="add" value="add"><span>Add</span></button>
</fieldset>
<!-- END: file_upload -->


<!-- BEGIN: file_edit -->
<div style="float: right; padding: 10px;">
<a class="button" title="Unlink file" href="#" onclick="if (confirm('Do you really want to unlink {FILE.src}?')) {$('#delete-file').attr('value', '{FILE.id})'; $('#files-form').submit();} else this.value=''"><span>Unlink</span></a>
</div>
<h1><a href="/download/{FILE.src}">{FILE.src}</a></h1>

<div id="item-edit">
<fieldset>
<div style="float: left;">	
	<div style="float: left; margin-right: 20px;">
		<label>Priority:</label>
		<input class="text" style="width: 50px;" type="text" name="file[priority]" value="{FILE.priority}" /><br />
		<label>Short description*:</label>
		<input type="text" id="file-title" name="file[title]" value="{FILE.title}"/><br />
		<label>Type:</label>
		<select name="file[type]" id="file-type" onchange="manage('jtcm-detail')">
			<option value="article" {SELECTED_article}>Article</option>
			<option value="abstract" {SELECTED_abstract}>Abstract</option>
			<option value="review" {SELECTED_review}>Review</option>
			<!--
			<option value="news" {SELECTED_news}>News</option> -->
		</select>
		
		<br /><br /><br /><br />
		
	</div>
	<div style="float: left;">
		<label>Authors:</label>
		<input type="text" name="file[authors]" value="{FILE.authors}"/><br />
		<label>Issue Number:</label>
		<input type="text" name="file[issue_number]" value="{FILE.issue_number}"/><br />
		<label>Page Where The Editorial Start:</label>
		<input type="text" name="file[page_from]" value="{FILE.page_from}"/><br />
		<label>Date Of Issue:</label>
		<input type="text" id="file-date" name="file[date]" value="{FILE.date}"/><br />
		<label>Publisher:</label>
		<input type="text" name="file[other][publisher]" value="{FILE.other.publisher}"/><br />
	</div>
	
	<div id="jtcm-detail" style="display: none;">
		<label>JTCM issue:</label>
		<input type="text" name="file[other][jtcm_issue]" value="{FILE.other.jtcm_issue}"/><br />
		<label>JTCM Page From:</label>
		<input type="text" name="file[other][jtcm_page_from]" value="{FILE.other.jtcm_page_from}"/><br />
		<label>JTCM date:</label>
		<input type="text" id="file-jtcm-date" name="file[other][jtcm_date]" value="{FILE.other.jtcm_date}"/><br />
	</div>
	
	<input type="hidden" name="file[id]" value="{FILE.id}" />
	<br /><br /><br /><br />
	<button type="submit" name="update" id="update" value="{FILE.id}" class="{FILE.id}"><span>Save</span></button>
	<button type="submit" name="upload" id="upload" value="new" class="new"><span>Cancel</span></button>
	
</div>

<br style="clear: both;"/>
</fieldset>

</div>
<!-- END: file_edit -->

<input type="hidden" name="file[role]" value="normal" />
<input type="hidden" name="file[node_id]" value="{GET.id}" />
<input type="hidden" name="edit_file" id="edit-file" value="" />

<br style="clear: both" />
<div id="server_browser">
{ONXSHOP_REQUEST_serverbrowser #bo/server_browser~type=add_to_node~}
</div>
<script type="text/javascript">
if (ie) button_fix = new button_fix();

if ($('#file-type').attr('value') == 'abstract') {
	$('#jtcm-detail').toggle();
}
</script>
{FILE "bo/node/default_bottom.html"}
<!-- END: content -->
